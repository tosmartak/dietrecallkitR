% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_non_gram_foods.R
\name{get_non_gram_foods}
\alias{get_non_gram_foods}
\title{Get Non-Gram Foods}
\usage{
get_non_gram_foods(
  maintable,
  food_details,
  food_ingredients,
  location_col,
  key = "survey_id",
  export_path = NULL
)
}
\arguments{
\item{maintable}{A data frame with survey-level information (must include
\code{key} and the specified \code{location_col}).}

\item{food_details}{A data frame with food details (must include
\code{key}, \code{desc_of_food}, and \code{unit_qty_food_consumed}).}

\item{food_ingredients}{A data frame with food ingredients (must include
\code{key}, \code{food_ingredients_used}, and \code{food_ingredient_unit}).}

\item{location_col}{Character string. Name of the location column in \code{maintable}
(e.g., \code{subcounty}, \code{district}). Must be provided explicitly.}

\item{key}{Character string. The column name that uniquely links
\code{maintable}, \code{food_details}, and \code{food_ingredients}.
Typically \code{survey_id}.}

\item{export_path}{Optional. File path to export results as an Excel file.
If supplied, the Excel file will be created with all required columns and
empty \code{amount} and \code{gram} fields for later user input.}
}
\value{
A tibble with columns:
\describe{
\item{\code{location_col}}{Location identifier column, as specified in maintable}
\item{food_item}{Food item consumed or ingredient used}
\item{unit}{Original unit recorded (not grams)}
\item{amount}{Empty column for later input}
\item{gram}{Empty column for later input}
}
}
\description{
Extracts unique food items from dietary recall data where units are not
measured in grams ("g from scale" or "g from photobook"). Combines results from
\code{food_details} and \code{food_ingredients_group} and links them with
household location information from \code{maintable}.
}
\details{
Optionally, the results can be exported to Excel. The exported file contains
all relevant columns, with two extra empty columns (\code{amount}, \code{gram})
for user input. Users are expected to fill in only these two columns and
should avoid modifying the location column, \code{food_item}, or \code{unit}.

If all food items in the dataset are recorded in grams
("g from scale" or "g from photobook"), the function will return
an empty tibble with the correct columns, print a message to the user,
and skip Excel export (even if \code{export_path} is provided).
}
\examples{
data("dietrecall_example")
get_non_gram_foods(
  maintable = dietrecall_example$maintable,
  food_details = dietrecall_example$food_details,
  food_ingredients = dietrecall_example$food_ingredients_group,
  location_col = "subcounty",
  key = "survey_id"
)

}
