% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_ear_adequacy.R
\name{compute_ear_adequacy}
\alias{compute_ear_adequacy}
\title{Compute Nutrient Adequacy Based on EAR Cutoff Method}
\usage{
compute_ear_adequacy(
  data,
  age_col,
  life_group,
  nutrients,
  include_ear_values = FALSE
)
}
\arguments{
\item{data}{A data frame containing age and nutrient intake data.}

\item{age_col}{Character string. Column name for age (in years or months depending on life group).}

\item{life_group}{Character string indicating the life-stage group.
Must be one of \code{"Female"}, \code{"Male"}, \code{"Child"}, \code{"Pregnant"}, or \code{"Lactating"}.}

\item{nutrients}{A named character vector where names are nutrient names (e.g. \code{"Protein"})
and values are corresponding column names in the dataset.}

\item{include_ear_values}{Logical. If \code{TRUE}, includes EAR value columns in the output.
Defaults to \code{FALSE}.}
}
\value{
A tibble containing the original data plus adequacy columns.
If \code{include_ear_values = TRUE}, EAR columns are also included.
}
\description{
This function computes nutrient adequacy using the Estimated Average Requirement (EAR)
cutoff method for individuals based on their age and specified life-stage group.
It references Dietary Reference Intake (DRI) EAR values from the Institute of Medicine (IOM)
and applies the cut-point approach to determine whether each individual meets or fails
the EAR for each nutrient.
}
\details{
For each individual, the function:
\enumerate{
\item Looks up the EAR based on the provided age and life-stage group.
\item Compares the individual’s intake to that EAR.
\item Returns adequacy = 1 if intake ≥ EAR, otherwise 0.
}

The function currently supports these nutrients:
Calcium, CHO, Protein, Vitamin A, Vitamin C, Vitamin D, Vitamin E,
Thiamin, Riboflavin, Niacin, Vitamin B6, Folate, Vitamin B12, Copper,
Iodine, Iron, Magnesium, Molybdenum, Phosphorus, Selenium, Zinc.

Each nutrient produces two additional columns: one for EAR values and one for
adequacy indicators (1/0), each prefixed with the life group for clarity.
(e.g. \code{Female_Protein_g_ear}, \code{Female_Protein_g_adequacy})
}
\note{
Ensure that the age column is expressed in \strong{years} for adults and \strong{months} for children,
as EAR reference values are age-unit specific.
}
\examples{
df <- tibble::tibble(
  age = c(10, 25, 35, 45),
  Protein_g = c(1.2, 0.7, 0.6, 0.8),
  Calcium_mg = c(900, 850, 700, 950)
)
nutrients <- c("Protein" = "Protein_g", "Calcium" = "Calcium_mg")
compute_ear_adequacy(df, age_col = "age", life_group = "Female", nutrients = nutrients)

}
\references{
Institute of Medicine (US). Dietary Reference Intakes Tables, Appendix J. 2006.
https://www.ncbi.nlm.nih.gov/books/NBK545442/
}
