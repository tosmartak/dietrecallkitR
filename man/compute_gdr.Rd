% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_gdr.R
\name{compute_gdr}
\alias{compute_gdr}
\title{Compute Global Dietary Recommendations (GDR) Score}
\usage{
compute_gdr(
  recall_data,
  id_col,
  food_item_col,
  use_fct_db = FALSE,
  gdr_map_data = NULL,
  gdr_map_food = NULL,
  gdr_map_col = NULL
)
}
\arguments{
\item{recall_data}{A data frame containing at least the ID column and the food item column.}

\item{id_col}{Character. Name of the identifier column in \code{recall_data}
(e.g., \code{"survey_id"}).}

\item{food_item_col}{Character. Column in \code{recall_data} containing food item names.}

\item{use_fct_db}{Logical, default = FALSE. If TRUE, uses the package's
online FCT database (\code{gdr_category} column).}

\item{gdr_map_data}{Optional. A user-provided mapping data frame with
food items and GDR categories. Required if \code{use_fct_db = FALSE}.}

\item{gdr_map_food}{Character. Column name in \code{gdr_map_data} that matches food items.}

\item{gdr_map_col}{Character. Column name in \code{gdr_map_data} containing the GDR category.}
}
\value{
A tibble with:
\itemize{
\item The ID column (as provided in \code{id_col})
\item One-hot encoded GDR group indicators
\item \code{gdrplus}  = sum of positive GDR categories
\item \code{gdrminus} = sum of negative GDR categories
\item \code{gdr_score} = net score (gdrplus - gdrminus + 9)
}
}
\description{
Computes the Global Dietary Recommendation (GDR) score from cleaned dietary recall data.
Uses either the package FCT database (online CSV) or a user-supplied mapping.
}
\details{
\itemize{
\item Valid GDR+ categories: Whole Grains, Legumes, Nuts And Seeds,
Vitamin A-Rich Orange Vegetables, Roots And Tubers,
Dark Green Leafy Vegetables, Other Vegetables,
Vitamin A-Rich Fruits, Citrus Fruits, Other Fruits.
\item Valid GDRâ€“ categories: Sodas/Sugar-Sweetened Beverages,
Baked/Grain-Based Sweets, Other Sweets, Processed Meat,
Unprocessed Red Meat, Deep-Fried Foods,
Fast Food And Instant Noodles, Packaged Ultra-Processed Salty Snacks.
\item Processed Meat is scored as 2 if consumed.
\item Warns if unmapped items are found in \code{recall_data} and ignored in subsequent computation.
\item Errors if invalid GDR categories are found in mapping.
}
}
\examples{
\dontrun{
# Using online FCT DB
result <- compute_gdr(
  recall_data   = dietrecall_example$food_details,
  id_col        = "survey_id",
  food_item_col = "desc_of_food",
  use_fct_db    = TRUE
)

# Using custom mapping
gdr_map <- data.frame(
  item = c("Ugali", "Cola"),
  category = c("Whole Grains", "Sodas/Sugar-Sweetened Beverages")
)

result <- compute_gdr(
  recall_data   = dietrecall_example$food_details,
  id_col        = "survey_id",
  food_item_col = "desc_of_food",
  use_fct_db    = FALSE,
  gdr_map_data  = gdr_map,
  gdr_map_food  = "item",
  gdr_map_col   = "category"
)
}

}
